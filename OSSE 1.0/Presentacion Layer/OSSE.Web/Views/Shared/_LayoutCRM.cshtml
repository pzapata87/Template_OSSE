@using OSSE.Common.Constantes
@using Resources

<!DOCTYPE html>
<html lang="es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <title>SIG - @ViewBag.Title</title>

    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link href="@Url.Content("~/Content/images/favicon.ico")" rel="shortcut icon" type="image/x-icon" />
    @*<link href="@Url.Content("~/Content/CRM/Impresion.css")" rel="stylesheet" type="text/css" />*@
    <link href="@Url.Content("~/Content/CRM/reset.css")" rel="stylesheet" type="text/css" />
    @*<link href="@Url.Content("~/Content/CRM/complex.css")" rel="stylesheet" type="text/css" />*@
    <link href="@Url.Content("~/Content/CRM/css/site.css")" rel="stylesheet" type="text/css" />
    @*<link href="@Url.Content("~/Content/CRM/pasos-grupo.css")" rel="stylesheet" type="text/css" />*@
    <link href="@Url.Content("~/Content/themes/vogue_css/jquery-ui-1.10.4.custom.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/jqgrid/css/ui.jqgrid.css")" rel="stylesheet" type="text/css" />
    @*<link href="@Url.Content("~/Scripts/uploadify/uploadify.css")" rel="stylesheet" type="text/css" />*@
    <link href="@Url.Content("~/Scripts/Qtip2/jquery.qtip.css")" rel="stylesheet" type="text/css" />

    <script src="@Url.Content("~/Scripts/jquery-2.1.0.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-migrate-1.2.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Localization/jquery.validate.es.js")" type="text/javascript"></script>

    <script src="@Url.Content("~/Scripts/autocomplete.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/VOGUE.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.10.4.custom.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/DialogExtender/jquery.dialogextend.js")" type="text/javascript"></script>
    @*<script src="@Url.Content("~/Scripts/DialogExtender/customdialogextend.js")" type="text/javascript"></script>*@
    <script src="@Url.Content("~/Scripts/jquery.cookie.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.treeview.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/tabscrolling/Fader.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/tabscrolling/TabPanel.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/tabscrolling/Math.uuid.js")" type="text/javascript"></script>

    <link href="@Url.Content("~/Content/CRM/TabPanel.css")" rel="stylesheet" type="text/css" />
    @*<link href="@Url.Content("~/Content/CRM/notificaciones.css")" rel="stylesheet" type="text/css" />*@
    <link href="@Url.Content("~/Content/CRM/forms.css")" rel="stylesheet" type="text/css" />
    @*<link href="@Url.Content("~/Content/CRM/dp.css")" rel="stylesheet" type="text/css" />*@

    <script src="@Url.Content("~/Content/jqgrid/js/jquery.jqGrid.src.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/jqgrid/js/i18n/grid.locale-es.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.alphanumeric.pack.js")" type="text/javascript"></script>

    <link href="@Url.Content("~/Content/themes/jquery.multiselect.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery.multiselect.js")" type="text/javascript"></script>

    <link href="@Url.Content("~/Content/themes/jquery.multiselect.filter.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery.multiselect.filter.js")" type="text/javascript"></script>

    <script src="@Url.Content("~/Scripts/jquery.jstree.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.blockUI.js")" type="text/javascript"></script>

    @*<link href="@Url.Content("~/Content/PasswordLength/style.css")" rel="stylesheet" type="text/css" />*@
    @*<script src="@Url.Content("~/Content/PasswordLength/jquery.pwstrength.js")" type="text/javascript"></script>*@

    <script src="@Url.Content("~/Scripts/ui.datepicker-es.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/ui.datepicker-pt.js")" type="text/javascript"></script>

    <script src="@Url.Content("~/Scripts/JSLINQ.js")" type="text/javascript"></script>

    <script src="@Url.Content("~/Scripts/jquery.jgrowl.min.js")" type="text/javascript"></script>

    <script src="@Url.Content("~/Scripts/ext-all-debug.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Content/Sencha/ext-theme-classic-all-debug.css")" rel="stylesheet" type="text/css" />

    <link href="@Url.Content("~/Scripts/fullcalendar/fullcalendar.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/fullcalendar/fullcalendar.js")" type="text/javascript"></script>

    <link href="@Url.Content("~/Content/Notificaciones/jquery.jgrowl.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Scripts/TimePicker/jquery-ui-timepicker-addon.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/TimePicker/jquery-ui-timepicker-addon.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.printElement.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Qtip2/jquery.qtip.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Scripts/Qtip2/estilo-form.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Alertas/Alertas.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Alertas/AnimationBell.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/CustomValidations/JqueryCustomValidation.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/LoadingAnimator/jquery.percentageloader-0.1.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Scripts/LoadingAnimator/jquery.percentageloader-0.1.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/LoaderManager.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MomentJs/moment-with-langs.js")" type="text/javascript"></script>

    @RenderSection("ScriptContent", false)

</head>
<body id="contenedorPrincipal">
    <div id="masterPanelOeste" class="navpane">
        <div id="panelBodyLayout" class="panelbody">
        </div>
        <div id="panelItemsLayout" class="panelitems">
        </div>
    </div>
    <div id="masterPanelEste" class="navpane" style="background-color: red;">
        <div class="panelbodyeast">
            <div class="panelEjecuciones">
                <div id="LogEventosPlantilla" style="overflow: auto;">
                </div>
            </div>
        </div>
    </div>

    <div id="masterPanelNorte">
        <div class="headercolor">
            <div class="header">
                <div class="headerSignIn">
                    <div id="usrAccount" style="width: 50px; text-align: center; margin-left: 5px; float: right;">
                        <img src="~/Images/dibu-usuario.PNG" style="cursor: pointer; width: 43px; height: 53px" alt="usuario" title="@Master.Usuario">
                    </div>
                </div>
                <div class="headertitle">
                    <h1>
                        <img src="@Url.Content("~/Images/logo-vogue.png")" alt="logo">
                    </h1>
                </div>
            </div>
        </div>
        <div class="toolbar">
            <ul class="menubarleft">
                <li><a>Empresa: <b>@ViewData[MasterConstantes.Empresa]</b></a></li>
                <li class="menuspacer"></li>
                <li><a>RUC: <b>@ViewData[MasterConstantes.RUC]</b></a></li>
                <li class="menuspacer"></li>
                <li><a>Direccion: <b>@ViewData[MasterConstantes.Direccion]</b></a></li>
                <li class="menuspacer"></li>
                <li><a>TELF: <b>@ViewData[MasterConstantes.Telefono]</b></a></li>
                <li class="menuspacer"></li>
                <li><a>EMAIL: <b>@ViewData[MasterConstantes.Email]</b></a></li>
            </ul>
            <div class="clear">
            </div>
        </div>
    </div>
    <div id="masterPanelSur" class="footer">
        <b class="footerinfo">@ViewData[MasterConstantes.Empresa] &reg;</b>
        <b class="footerstatus">@Master.FechaSistema: <span id="hora">000000</span> </b>
        <br class="clear" />
    </div>
    <div id="mainContent" style="height: 100%">
        <!-- DIVs for the INNER LAYOUT -->
        <div class="ui-layout-center">
            <!--[if lt IE 9]><div class="ie"><![endif]-->
            <div id="tab">
            </div>
            <div>
            </div>
            @RenderBody()
            <!--[if lt IE 9]></div><![endif]-->
        </div>
    </div>
    <div id="accountToolTip" style="display: none">
        <div class="content_usuario ">
            <div class="left_content">
                <img src="~/Images/dibu-usuario.PNG" alt="usuario">
            </div>
            <div class="right_content">
                <div class="fila_form">@ViewData[MasterConstantes.UsuarioActual]</div>
                <div class="fila_form">vogue@gmail.com</div>
                <div class="fila_form">Cuenta - Privacidad</div>
            </div>
            <div class="footer_content">
                <div class="fila_form">
                    <div class="span10"></div>
                    <div class="span120">
                        <input id="btnCambiarContraseña" type="button" class="btns_perfil_usuario" value="@Master.CambiarPassword">
                    </div>
                    <div class="span100">
                        <input id="btnCerrarSesion" type="button" class="btns_perfil_usuario" value="@Master.CerrarSesion">
                    </div>
                    <div class="span10"></div>
                </div>
            </div>
        </div>
    </div>

    <div id='dialog-CerrarSesion' style="display: none;">
        @Master.SalirSistema
    </div>

    <div id='dialog-Panel' style="display: none">
    </div>

    <script type="text/javascript">
        var pageBlocked = false;
        var handlerActivo = false;

        $(document).ready(function () {
            ListarTreView(function () {
                $('body').on('click', '.itemMenuClass', cambiar);
            });
            CreateDialogsConfirm();
            CrearDialogs();

            $('#btnCerrarSesion').bind("click", function (e) {
                e.preventDefault();
                $("#dialog-CerrarSesion").dialog("open");
            });

            $('#btnCambiarContraseña').bind("click", function (e) {
                e.preventDefault();
                var url = '@Url.Action("ChangePassword", "Account", new { area = "" })';

                var opciones = {
                    title: "@Html.Raw(Usuario.ChangePassword)",
                    height: 220,
                    width: 370,
                    url: url,
                    buttonsConfig: {
                        guardarText: '@Master.Guardar',
                        GuardarHandlerFunction: 'ConfirmarGuardarContraseña',
                        cancelarText: '@Master.Cancelar'
                    }
                };
                VOGUE.CreateDialogPopUpForm(opciones);
            });

            $('#usrAccount').qtip({
                content: {
                    text: $("#accountToolTip")
                },
                style: {
                    classes: 'qtip-rounded qtip-blue qtip-shadow',
                    width: 280
                },
                position: { my: 'right top', at: 'bottom left' },
                show: {
                    event: 'click',
                    effect: function () {
                        $(this).slideDown();
                    }
                },
                hide: {
                    event: 'unfocus',
                    effect: function () {
                        $(this).slideUp();
                    }
                }
            });

            $.blockUI.defaults.baseZ = 100000;
            $.blockUI.defaults.overlayCSS.opacity = 0.4;
            $.blockUI.defaults.css.backgroundColor = "transparent";
            $.blockUI.defaults.css.border = '0px none';
            $.blockUI.defaults.fadeIn = 100;
            $.blockUI.defaults.fadeOut = 100;

            // Definir el idioma de DatePicker
            var idioma = '@ViewData[MasterConstantes.Idioma]' == 'en' ? '' : '@ViewData[MasterConstantes.Idioma]';
            $.datepicker.setDefaults($.datepicker.regional[idioma]);

            $.jGrowl.defaults.pool = 5;
        });

        function CerrarSesionWeb() {
            window.location = '@Url.Action("LogOff", "Account")';
        }

        function CreateDialogsConfirm() {
            var title = '@Master.TituloAlerta';
            var titleBtn1 = '@Master.Aceptar';
            var titleBtn2 = '@Master.Cancelar';
            var arrayDialog =
            [
                {
                    name: "dialog-CerrarSesion",
                    height: 150,
                    width: 280,
                    title: title,
                    titleBtn1: titleBtn1,
                    titleBtn2: titleBtn2,
                    //contenedor: '#mainContent',
                    strFun: 'CerrarSesionWeb'
                }
            ];
            VOGUE.CreateDialogsConfirm(arrayDialog);
        }

        function CrearDialogs() {
            var arrayDialog = [{ name: "dialog-Panel", width: 500, title: '@Master.Usuario', contenedor: '#mainContent' }];
            VOGUE.CreateDialogs(arrayDialog);
        }

        function cambiar(e) {
            e.preventDefault();
            e.stopPropagation();

            var titulo = $(this).attr("title");
            var idTab = $(this).attr("id") + "Tab";
            var url = $(this).attr("data-url");

            var tabActivo = tabpanel.getActiveTab();
            if (tabActivo != null) {
                if (tabActivo.id != idTab)
                    tabpanel.kill(tabActivo.id);
            }

            CrearTabContent(url, titulo, idTab, false);
        }

        function ListarTreView(callback) {
            var urlListar = ' @Url.Action("ListarTreView", "Base")';

            $.ajax({
                url: urlListar,
                type: 'post',
                contentType: 'application/json; charset=utf-8',
                async: false,
                success: function (response) {
                    var detalle = response;
                    $('#panelItemsLayout').append(detalle);
                    callback();
                },
                error: function (error) {
                    alert('Error with AJAX callback: ' + error.responseText);
                }
            });
        }

    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".panelitems ul li").hover(function () {
                if ($(this).attr("id") != "liGaleria" && ($(this).attr("title") != "Opciones")) {
                    if (!$(this).hasClass("pselected"))
                        $(this).addClass("phover");
                }
            }, function () {
                if ($(this).attr("id") != "liGaleria" && ($(this).attr("title") != "Opciones")) {
                    $(this).removeClass("phover");
                }
            });

            $(".panelitems ul li").live("click", function () {
                if ($(this).attr("id") != "liGaleria") {
                    var idx = $(this).attr("data-idx");
                    SelecionarItemActual(idx);
                }
            });

            $(".panelEjecuciones ul li").hover(function () {
                if (!$(this).hasClass("pselected"))
                    $(this).addClass("phover");
            }, function () {
                $(this).removeClass("phover");
            });

            $(".panelEjecuciones ul li").live("click", function () {
                alert('Mostrar Visualizador');
            });

            ResizableWindow();
            $(window).resize(function () {
                ResizableWindow();
            });

            var cookieIdx = "PANEL_IDX";
            var cookieActualSubItem = "PANEL_APLICACION";

            //Selecciono el item cuaado hay un postback
            var indicePanelActual = $.cookie(cookieIdx);
            if (indicePanelActual == null) {
                SelecionarItemActual(1);
                $(".panelbody").html(BuscarContenidoActual(1));
            }
            else {
                SelecionarItemActual(indicePanelActual);
                $(".panelbody").html(BuscarContenidoActual(indicePanelActual));
            }

            //Establece el titulo en el panel de aplicacion, cuando hay un postback
            var textPanelActual = $.cookie(cookieActualSubItem);
            if (textPanelActual == null) {
                $("#headlineAplicacion").html("VOGUE SAC");
            }
            else {
                $("#headlineAplicacion").html(textPanelActual);
            }

            $(".panelitems ul li a").live("click", function () {
                if ($(this).attr("id") != "toolTipLink") {
                    var indice = $(this).parent().attr("data-idx");
                    $.cookie(cookieIdx, indice);

                    //Obteneer la lista interna
                    $(".panelbody").html(BuscarContenidoActual(indice));
                }
            });

            //Fijo el texo en el panel de aplicacion
            $(".menuNavegacion li a").live("click", function () {
                var tempText = $(this).attr("title");
                $.cookie(cookieActualSubItem, tempText);
                $("#headlineAplicacion").html(tempText);
            });

            //Menu
            $(".menuNavegacion li:has(.selected)").addClass("open");
            $(".menuNavegacion").treeview({
                animated: "fast",
                collapsed: false,
                unique: false,
                persist: "cookie",
                cookieOptions: { path: "/" }
            });
        });

        var heightContent = 200;
        function ResizableWindow() {
            var height = $(window).height() - 98;
            var cantidadLi = 0;
            jQuery.each($(".panelitems ul:first>li"), function () {
                if ($(this).css('display') == 'block')
                    cantidadLi++;
            });

            var heightpanel = $(window).height() - (cantidadLi + 1) * 32 - 133 + 30; //El 30 es el height del panel de ocultar modulos
            $(".panelbody").css({ "height": +heightpanel + "px" });
            $(".panelbodyeast").css({ "height": +height + "px" });
            heightContent = height;
        }

        function SelecionarItemActual(index) {
            if (index != 0) {
                $(".panelitems ul li").each(function () {
                    if ($(this).attr("id") != "liGaleria" && ($(this).attr("title") != "Opciones")) {
                        if ($(this).attr("data-idx") == index)
                            $(this).addClass("pselected");
                        else {
                            $(this).removeClass("pselected");
                        }
                    }
                });
            }
        }

        function BuscarTituloActual(index) {
            var txtTemp;
            $(".panelitems ul li").each(function () {
                if ($(this).attr("id") != "liGaleria") {
                    if ($(this).attr("data-idx") == index) {
                        txtTemp = $(this).children("a").attr("title");
                    }
                }
            });
            return txtTemp;
        }

        function BuscarContenidoActual(index) {
            var contentTemp = "<div class='panelbody-subitems'>";
            $(".panelitems ul li").each(function () {
                if ($(this).attr("id") != "liGaleria") {
                    if (($(this).attr("data-idx") == index) && ($(this).attr("title") != "liGaleriaIcon")) {
                        var temp = $(this).children("div").html();
                        if (temp == null) {
                            temp = "Items no disponibles";
                        }
                        contentTemp += temp;
                    }
                }
            });

            contentTemp += "</div>";

            return contentTemp;
        }
    </script>
    <script type="text/javascript">
        var tabpanel;
        var dialogList = new Array();
        Ext.require(['*']);
        Ext.onReady(function () {
            CrearLayout(
            { height: 85, contentEl: 'masterPanelNorte' },
            { collapsible: false, split: false, height: 22, maxHeight: 22, contentEl: 'masterPanelSur', weight: 10 },
            { collapsible: true, split: true, title: 'Chat', width: 250, contentEl: 'masterPanelEste', collapsed: true, hidden: true },
            { collapsible: true, split: true, title: '@Master.PanelControl', width: 220, contentEl: 'masterPanelOeste' },
            { contentEl: 'mainContent', monitorResize: true, resize: ResizeCenterPane },
            { fullScreen: true });

            tabpanel = new TabPanel({
                renderTo: 'tab',
                border: 'node',
                active: 0,
                padding: 5,
                maxLength: 20,
                widthResizable: true,
                items: []
            });

            $(".panelbody a").live("click", function () {
                var titleTab = VOGUE.LimpiarTilde($(this).attr("title"));
                var idTab = $(this).attr("id");
                idTab = idTab + "0";

                tabpanel.addTab({
                    id: idTab,
                    title: titleTab,
                    html: "<div class='preloadtab'></div>",
                    closable: true,
                    disabled: false
                });
            });

            $(".preloadtab").animate({
                opacity: 0.25
            });

            setTimeout(sessionReset, 60000 * 25);
        });

        function sessionReset() {
            $.ajax({ url: '@Url.Action("SessionReset", "Ajax", new { Area = "" })', type: "GET", cache: false, async: false });
            setTimeout(sessionReset, 60000 * 25);
        }

        function ResizeCenterPane() {
            if (tabpanel != null)
                tabpanel.resize();
        }

        function CrearLayout(norte, sur, este, oeste, centro, settings) {
            var viewport = Ext.create(settings.fullScreen ? 'Ext.Viewport' : 'Ext.panel.Panel', {
                layout: { type: 'border', padding: 0 },
                defaults: { split: true },
                items: [{
                    region: 'north',
                    id: norte.id == null ? null : norte.id,
                    contentEl: norte.contentEl == null ? null : norte.contentEl,
                    collapsible: norte.collapsible == null ? false : norte.collapsible,
                    collapsed: norte.collapsed == null ? false : norte.collapsed,
                    split: norte.split == null ? false : norte.split,
                    hidden: norte.hidden == null ? false : norte.hidden,
                    title: norte.title == null ? '' : norte.title,
                    height: norte.height == null ? 50 : norte.height,
                    minHeight: norte.minHeight == null ? 50 : norte.minHeight,
                    maxHeight: norte.maxHeight == null ? norte.height : norte.maxHeight,
                    width: norte.width == null ? 200 : norte.width,
                    minWidth: norte.minWidth == null ? 120 : norte.minWidth,
                    weight: norte.weight == null ? 0 : norte.weight,
                    monitorResize: norte.monitorResize,
                    listeners: {
                        resize: {
                            fn: norte.resize
                        }
                    }
                },
                {
                    region: 'south',
                    id: sur.id == null ? null : sur.id,
                    contentEl: sur.contentEl == null ? null : sur.contentEl,
                    collapsible: sur.collapsible == null ? false : sur.collapsible,
                    collapsed: sur.collapsed == null ? false : sur.collapsed,
                    split: sur.split == null ? false : sur.split,
                    hidden: sur.hidden == null ? false : sur.hidden,
                    title: sur.title == null ? '' : sur.title,
                    height: sur.height == null ? 50 : sur.height,
                    minHeight: sur.minHeight == null ? null : sur.minHeight,
                    maxHeight: sur.maxHeight == null ? null : sur.maxHeight,
                    width: sur.width == null ? 200 : sur.width,
                    minWidth: sur.minWidth == null ? 120 : sur.minWidth,
                    weight: sur.weight == null ? 0 : sur.weight,
                    monitorResize: sur.monitorResize,
                    listeners: {
                        resize: {
                            fn: sur.resize
                        }
                    }
                },
                {
                    region: 'center',
                    id: centro.id == null ? null : centro.id,
                    contentEl: centro.contentEl == null ? null : centro.contentEl,
                    collapsible: centro.collapsible == null ? false : centro.collapsible,
                    collapsed: centro.collapsed == null ? false : centro.collapsed,
                    split: centro.split == null ? false : centro.split,
                    hidden: centro.hidden == null ? false : centro.hidden,
                    title: centro.title == null ? '' : centro.title,
                    height: centro.height == null ? 50 : centro.height,
                    minHeight: centro.minHeight == null ? 50 : centro.minHeight,
                    width: centro.width == null ? 200 : centro.width,
                    minWidth: centro.minWidth == null ? 120 : centro.minWidth,
                    weight: centro.weight == null ? 0 : centro.weight,
                    monitorResize: centro.monitorResize,
                    listeners: {
                        resize: {
                            fn: centro.resize
                        }
                    }
                },
                {
                    region: 'east',
                    id: este.id == null ? null : este.id,
                    contentEl: este.contentEl == null ? null : este.contentEl,
                    collapsible: este.collapsible == null ? false : este.collapsible,
                    collapsed: este.collapsed == null ? false : este.collapsed,
                    split: este.split == null ? false : este.split,
                    hidden: este.hidden == null ? false : este.hidden,
                    title: este.title == null ? '' : este.title,
                    height: este.height == null ? 50 : este.height,
                    minHeight: este.minHeight == null ? 50 : este.minHeight,
                    width: este.width == null ? 200 : este.width,
                    minWidth: este.minWidth == null ? 120 : este.minWidth,
                    weight: este.weight == null ? 0 : este.weight,
                    monitorResize: este.monitorResize,
                    listeners: {
                        resize: {
                            fn: este.resize
                        }
                    }
                },
                {
                    region: 'west',
                    id: oeste.id == null ? null : oeste.id,
                    contentEl: oeste.contentEl == null ? null : oeste.contentEl,
                    collapsible: oeste.collapsible == null ? false : oeste.collapsible,
                    collapsed: oeste.collapsed == null ? false : oeste.collapsed,
                    split: oeste.split == null ? false : oeste.split,
                    hidden: oeste.hidden == null ? false : oeste.hidden,
                    title: oeste.title == null ? '' : oeste.title,
                    height: oeste.height == null ? 50 : oeste.height,
                    minHeight: oeste.minHeight == null ? 50 : oeste.minHeight,
                    width: oeste.width == null ? 200 : oeste.width,
                    minWidth: oeste.minWidth == null ? 120 : oeste.minWidth,
                    weight: oeste.weight == null ? 0 : oeste.weight,
                    monitorResize: oeste.monitorResize,
                    listeners: {
                        resize: {
                            fn: oeste.resize
                        }
                    }
                }]
            });

            if (!settings.fullScreen) {
                Ext.application({
                    name: 'SIGApp',
                    launch: function () {
                        Ext.create('Ext.panel.Panel', {
                            width: settings.width,
                            height: settings.height,
                            layout: 'fit',
                            renderTo: Ext.get(settings.Container),
                            items: viewport
                        });

                    }
                });
            }
        }

    </script>
    <script>
        $(document).ready(function () {
            ResizableWindowContent();
            $(window).resize(function () {
                ResizableWindowContent();
            });
        });

        function CrearTabDeUnLink(url, titulo, id) {
            titulo = VOGUE.LimpiarTilde(titulo);
            var titleTab = titulo;
            var idTab = id;
            idTab = idTab + "0";
            if (tabpanel.tabs.length > 0)
                tabpanel.kill(0);

            tabpanel.addTab({
                id: idTab,
                title: titleTab,
                html: "<div class='preloadtab' ></div>",
                closable: true,
                disabled: false
            });

            $('.preloadtab').load(url, function () {
                $('.preloadtab').css('background-image', 'none');
                ResizableWindowContent();
                stopLoaderHandler();
            });
        }

        function CrearTabContent(url, titulo, idTab, reload) {
            if (reload) {
                if ($('#' + idTab).length > 0) {
                    tabpanel.kill(idTab);
                }
            }

            if ($('#' + idTab).length > 0) {
                tabpanel.show(idTab, false);
            } else {
                tabpanel.addTab({
                    id: idTab,
                    title: VOGUE.LimpiarTilde(titulo),
                    html: "<div class='preloadtab" + idTab + "' ></div>",
                    closable: true,
                    disabled: false
                });


                var stopLoaderHandler = IniciarAnimacion("#mainContent");
                $('.preloadtab' + idTab).load(url, function () {
                    ResizableWindowContent();
                    stopLoaderHandler();
                });
            }
        }

        function CargarDialogListByTabItem(listaAlertMod, listaDialog) {
            var tabActivo = tabpanel.getActiveTab();
            dialogList.push({
                id: tabActivo.id,
                listaAlertMod: listaAlertMod
            });
        }

        function EliminarCrearTabContent(url, titulo, accion, reload) {
            var tabActivo = tabpanel.getActiveTab();
            tabpanel.kill(tabActivo.id);
            CrearTabContent(url, titulo, tabActivo.id + accion, reload);
        }

        function EliminarDialogListByTabItem(id) {

            var removeMe = -1;
            var dialogitem = new Object();
            jQuery.each(dialogList, function (index, item) {
                if (item.id == id) {
                    dialogitem = item;
                    removeMe = index;
                }
            });

            if (dialogitem.listaAlertMod != null) {
                jQuery.each(dialogitem.listaAlertMod, function (index, item) {
                    $("#alertmod_" + item).remove();
                });
            }

            if (dialogitem.listaDialog != null) {
                var listaUiDialog = $(".ui-dialog");
                jQuery.each(listaUiDialog, function (index, item) {
                    var identificador = $(this).attr('aria-labelledby');
                    identificador = identificador.replace("ui-dialog-title-", "");
                    if (dialogitem.listaDialog.indexOf(identificador) != -1) {
                        $(this).dialog("destroy").remove();
                        jQuery("#" + identificador).remove();
                    }
                });
            }
            if (removeMe != -1) {
                dialogList.splice(removeMe, 1);
            }
        }

        function GuardarCancelarTabContent(url, titulo, reload) {
            var tabActivo = tabpanel.getActiveTab();
            tabpanel.kill(tabActivo.id);
            CrearTabContent(url, titulo, tabActivo.preTabId, reload);
        }

        function ResizableWindowContent() {
            var height = $(window).height() - 200;
            var width = $(window).width() - 260;
            $('.scrollTotal').css('width', width + 'px');
            $('.scrollTotal').css('max-height', height + 'px');
            $('.scrollTotal').css('height', height + 'px');
            $('.scrollTotal').css('overflow-y', 'scroll');
            $('.scrollTotal').css('overflow-x', 'auto');
            $('.scrollTotal').css('position', 'relative');
        }

        function KillTab() {
            if (tabpanel.tabs.length > 0)
                tabpanel.kill(0);
        }

        function ChangeSuccess() {
            var url = '@Url.Action("ChangeSuccess", "Account", new { area = "" })';
            CrearTabContent(url, "Exito", "ChangeSuccess", false);
        }

        function CallbackSaveFrameFunction(popupObj, grilla) {
            $("#" + grilla).trigger("reloadGrid");
            $(popupObj).dialog("destroy");
        }
    </script>
    <script type="text/javascript" id="HoraActual">
        function show() {
            var digital = new Date();
            var dayName = new Array("Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado");
            var monName = new Array("Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septimbre", "Octubre", "Noviembre", "Diciembre");
            var hours = digital.getHours();
            var minutes = digital.getMinutes();
            var seconds = digital.getSeconds();
            var year = digital.getYear();
            if (year < 1000)
                year += 1900;
            var dn = "AM";
            if (hours > 12) {
                dn = "PM";
                hours = hours - 12;
            }
            if (hours == 0)
                hours = 12;
            else if (hours < 10) {
                hours = "0" + hours;
            }

            if (minutes <= 9)
                minutes = "0" + minutes;
            if (seconds <= 9)
                seconds = "0" + seconds;

            document.getElementById('hora').firstChild.nodeValue = dayName[digital.getDay()] + ", " + digital.getDate() + " de " + monName[digital.getMonth()] + " del " + year + ". " + hours + ":" + minutes + ":" + seconds + " " + dn;
            setTimeout("show()", 1000);
        }

        $(document).ready(function () {
            show();
        });

    </script>
</body>

</html>
